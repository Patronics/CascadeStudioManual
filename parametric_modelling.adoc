== Parametric modelling

=== What is parametric modelling? 

CascadeStudio, like all script or code based computer aided design (SCAD) programs, is ideally suited for parametric modelling. Parametric modelling is an approach to modelling where the main design features are entered as parameters. Often these parameters have a relation with the purpose of a part or object. For example for a staircase logical parameters would be the number of steps, the height of each step and the rotation of the staircase between each floor. With a parametric model the change of a parameter means that a different 3D model is generated. This way a part can be reused many times in different designs. The image below shows an example of a parametric design for a gear. All gears shown were generated using the same design but with a small change to some design parameters such as the diameter and the number of teeth (ref https://cadhub.xyz/u/franknoirot/gear). 

image::https://github.com/raydeleu/CascadeStudioManual/blob/main/images/gears.png[gears,500]

The design variations can even be larger, as demonstrated in this image that shows different shapes of vacuum heads, all generated using the same script. The interface at the right allows to change the values of the design parameters using sliders (ref. https://cadhub.xyz/u/irevdev/Vacuum-heads). 

image::https://github.com/raydeleu/CascadeStudioManual/blob/main/images/vacuum_heads.png[vacuum-heads,800]

The fact that design features are parameters also makes the design adaptable. This could be needed because strength calculations of a part require to add more material in certain areas, or because other parts in an assembly are changed. 

=== Design intent
However, it is not sufficient to define certain parameters in a model. It is also important to define the relationship between certain dimensions in a model. This relationship is also known as the design intent. The design intent defines how dimensions or features in an object change when one of the parameters in the object is changed. This is best explained with an example. 

The following image shows an image by JokoEngineeringHelp (https://youtube.com/c/JokoEngineeringHelp) of a practice part to learn modelling in different CAD programs. Although this crank is completely defined by the dimensions shown in the technical drawing, it does not seem to be designed with parametric modelling in mind. 

image::https://github.com/raydeleu/CascadeStudioManual/blob/main/images/forked_bracket_joko.png[forked_bracket,800]

For an engineer drafting this part, four dimensions might be really relevant, namely: 

* the distance between the two axles that the crank is supposed to bind together;
* the radius of the two axles that are connected using the crank;
* the distance between the two prongs of the fork, as supposedly something has to fit between it resulting in the design decision to make this a "forked" bracket;
* the thickness of the material around the axles, as this defines the strength of the crank; 

Of these four design parameters, only the inner radii are defined in the drawing. The other parameters have to be derived from the dimensions shown in the drawing. So for example, the distance between the two axles is not defined, but has to be derived from the total length of the product and the two outer radii around the axles. If we increase the distance between the two axles but keep the distance between the two prongs identical, the angle of the forked part would change. In the drawing this angle is fixed at 32.5 degrees. If the designer would add material to the end of the prongs to make them stronger, the distance between the prongs would shrink. 

To determine which dimensions are the design parameters, it helps to think in advance what you would like to change if any of the design parameters changes. If another dimension has to change together with the changed parameter, the difference between these two dimensions is probably a design parameter as well. The following image illustrates a change in the distance between the two axles and the increase of the diameter of the smaller axle. 

image::https://github.com/raydeleu/CascadeStudioManual/blob/main/images/change_design_intent.png[]

The image also show a proposal for design parameters that probably better fit the requirements for the crank. 

=== Why use parametric modelling? 
Some of the reasons to use parametric modelling were already mentioned above. The list below shows a summary of the most important reasons for using parametric modelling: 

==== Re-use a part or feature in different designs
For parts that are used very often you can use standard parts in a kind of library, but also use a generalized design with parameters. For example, if you want to use screws and bolts you can prepare a copy for each length of the thread of a screw, but using a parametric design that allows the user to enter the required specific length of the thread avoids the creation of a large library of parts. 

==== Change the dimensions to fit with other components or different sizes of users
Parts that have to fit together with existing other parts or parts designed by different people may have to follow design decisions leading to the change of this part. For example, if you just designed a clamp to hold a cable in place and you would have to use a slightly different diameter of cable, it would be much more practical to change your existing design than starting over with a completely new design. 

==== Change the dimensions to account for tolerances of the manufacturing method
Small changes in the required dimensions can also result from the manufacturing method that is not always known up front. Say you were producing a part in small numbers, youn would probably use a very flexible production method with low set-up costs, such as 3D printing. When your product is sold in higher numbers, you would change the production method to injection molding, with high costs to set-up your tools but very low cost per item. This change however could result in other tolerances or small changes to the shape of the product. 

==== Change a part after performing structural, thermodynamical or aerodynamical analysis 
After you have designed your product, you will probably perform an analysis and test to determine whether the part can withstand its intended use. Some of this analysis can be performed before you design the part, but as most calculations are an approximation based on assumptions, a test on the final product may show deficiencies in your design. In that case you would have to go back and make small changes to your design. Think about adding more material to reduce the stress or increasing the radius of fillets to reduce stress concentration around corners. 

==== Correct errors made early in the design history such as a non-manifold shape, unconnected faces, forgotten constraints on tangency or smoothness 




- quickly change the design for aesthetic reasons, explore variations of a design my manipulating a limited set of parameters
- easily generate repetitive patterns in designs
- create derivative products

Many CAD programs offer similar capabilities by employing a socalled design history, allowing the designer to step back through his/her design process to change things. In some cases however the design history is broken when a non-reversible manipulation is performed. Requirements like re-use of components and repetitive patterns are often solved through using a macro or script inside the CAD application. This adds the possibility to write a small piece of code to generate the required results. Alternatively some programs use a graphical approach using nodes. In fact this is identical to writing code, but allows the user to construct the code using components that can be connected visually. 




=== Parametric modelling using code


taken from https://cadquery.readthedocs.io/en/latest/designprinciples.html
https://www.engineering.com/story/whats-the-difference-between-parametric-and-direct-modeling


CAD models have many things in common with software, and would benefit greatly from the use of tools that are standard in the software industry, such as:

Easily re-using features between objects

Storing objects using version control systems

Computing the differences between objects by using source control tools

Share objects on the Internet

Automate testing and generation by allowing objects to be built from within libraries








As the program always constructs the end-result by running the complete script, it is possible to change the design features to adapt the design. 





http://web-cad.org/
https://freecadweb.org
https://github.com/xibyte/jsketcher
http://web-cad.org/sketcher.html#__sample2D__



